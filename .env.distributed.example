# Dyad Distributed Memory Configuration
# 
# Copy this file to .env and configure for distributed sync features
# These settings enable real-time collaboration across multiple Dyad instances

# ============================================================================
# MongoDB Configuration
# ============================================================================
# Persistent storage for distributed mode state, context, and audit trail

# Local MongoDB (via Docker)
MONGODB_URL=mongodb://localhost:27017

# MongoDB Atlas (Production)
# MONGODB_URL=mongodb+srv://username:password@cluster.mongodb.net

# Database name
MONGODB_DATABASE=dyad_distributed

# Connection pool settings (optional)
MONGODB_MAX_POOL_SIZE=10
MONGODB_MIN_POOL_SIZE=2

# Enable MongoDB integration
ENABLE_MONGODB=false

# ============================================================================
# Redis Configuration
# ============================================================================
# Event bus for real-time synchronization via pub/sub

# Local Redis (via Docker)
REDIS_URL=redis://localhost:6379

# Redis Cloud (Production)
# REDIS_URL=redis://username:password@redis-cloud.com:6379

# Redis SSL (Production)
# REDIS_URL=rediss://username:password@redis-cloud.com:6380

# Enable Redis integration
ENABLE_REDIS=false

# ============================================================================
# WebSocket Configuration
# ============================================================================
# Live sync server for instant client updates

# WebSocket server port
WS_SYNC_PORT=8765

# Enable WebSocket server
ENABLE_WEBSOCKET=false

# ============================================================================
# User Configuration
# ============================================================================
# Unique identifier for this user (for data isolation)

# User ID (can be email, UUID, or any unique identifier)
DISTRIBUTED_USER_ID=

# ============================================================================
# Feature Flags
# ============================================================================

# Enable all distributed features (MongoDB + Redis + WebSocket)
ENABLE_DISTRIBUTED_MEMORY=false

# Enable glass-box transparency tracking in MongoDB
ENABLE_GLASS_BOX_TRACKING=true

# Enable real-time event broadcasting
ENABLE_REAL_TIME_EVENTS=true

# ============================================================================
# Advanced Settings
# ============================================================================

# Sync event retention (days)
SYNC_EVENT_TTL_DAYS=7

# Distributed context TTL (days, 0 = no expiration)
CONTEXT_TTL_DAYS=30

# WebSocket ping interval (milliseconds)
WS_PING_INTERVAL=30000

# Redis reconnect max attempts
REDIS_MAX_RECONNECT_ATTEMPTS=10

# ============================================================================
# Quick Start Profiles
# ============================================================================

# Profile 1: Local Development (Docker)
# MONGODB_URL=mongodb://localhost:27017
# REDIS_URL=redis://localhost:6379
# WS_SYNC_PORT=8765
# ENABLE_DISTRIBUTED_MEMORY=true

# Profile 2: Production (Managed Services)
# MONGODB_URL=mongodb+srv://user:pass@cluster.mongodb.net
# REDIS_URL=rediss://user:pass@redis-cloud.com:6380
# WS_SYNC_PORT=8765
# ENABLE_DISTRIBUTED_MEMORY=true

# Profile 3: Disabled (Local Only)
# ENABLE_DISTRIBUTED_MEMORY=false

# ============================================================================
# Notes
# ============================================================================
#
# 1. MongoDB is required for persistent distributed state
# 2. Redis is required for real-time event synchronization
# 3. WebSocket is required for live client updates
# 4. All three can be enabled/disabled independently
# 5. Dyad works fine without distributed features (local-only mode)
# 6. Inspired mode does not use distributed features (privacy-first)
# 7. Didactic and Parallel modes benefit from distributed sync
#
# ============================================================================
